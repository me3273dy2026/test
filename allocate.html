<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Topic Allocation | ME3273</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.card{
  background:#fff;
  width:100%;
  max-width:520px;
  margin:24px 12px;
  padding:24px;
  border-radius:16px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
}
h1{font-size:15px;text-align:center;color:#203a43;margin:0;}
h2{font-size:14px;text-align:center;color:#555;margin:6px 0 14px;}
#loading{text-align:center;font-size:15px;color:#555;margin:30px 0;}

.countdown{
  background:#fff8e1;color:#6d4c41;
  padding:10px;border-radius:10px;
  text-align:center;font-size:14px;font-weight:600;
}

.blink{
  text-align:center;font-size:14px;margin:12px 0;
  animation:blinkColors 2s infinite;
}
@keyframes blinkColors{
  0%{color:#1abc9c;}
  25%{color:#3498db;}
  50%{color:#9b59b6;}
  75%{color:#e67e22;}
  100%{color:#1abc9c;}
}

#wheelWrap{display:flex;justify-content:center;margin:18px 0;}
canvas{max-width:260px}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:30px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  margin-top:12px;
}

.btn-primary{
  background:linear-gradient(135deg,#2c5364,#203a43);
  color:#fff;
}
.btn-seminar{
  background:linear-gradient(135deg,#1565c0,#0d47a1);
  color:#fff;
}
.btn-logout{
  background:#c0392b;
  color:#fff;
}

/* ‚úÖ CLOSE BUTTON FIX */
.btn-close{
  background:linear-gradient(135deg,#757575,#616161);
  color:#fff;
}
.btn-close:hover{
  background:linear-gradient(135deg,#616161,#424242);
}
.btn-close:disabled{
  background:#bdbdbd;
  color:#f5f5f5;
  cursor:not-allowed;
}

button:disabled{
  background:#999;
  cursor:not-allowed;
}

.status{margin-top:12px;text-align:center;font-size:14px}
.yellow{color:#f57f17;}
.green{color:#1b5e20;}
.red{color:#b71c1c;}

.infoBox{
  background:#f5f7fa;
  border-radius:12px;
  padding:14px;
  margin-top:16px;
  font-size:14px;
}

.footer{
  margin:12px 0 20px;
  text-align:center;
  font-size:13px;
  color:#e0e0e0;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
}
.modal-box{
  background:#fff;
  width:calc(100% - 32px);
  max-width:420px;
  border-radius:14px;
  padding:22px;
}
textarea{
  width:100%;
  min-height:90px;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
}
.instruction{
  margin-top:8px;
  font-size:13px;
  color:#b71c1c;
}
.modal-actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}
</style>
</head>

<body>

<div class="card">
  <h1 id="welcome">Welcome</h1>
  <h2>Group Discussion & Seminar (ME3273)</h2>

  <div id="loading">Loading, please wait‚Ä¶</div>

  <div id="content" style="display:none">

    <div class="countdown">
      ‚è≥ Time remaining: <span id="timeLeft">--:--:--</span>
    </div>

    <div id="spinMsg" class="blink">
      Spin the coin to get your topic name for group discussion
    </div>

    <div id="wheelWrap">
      <canvas id="wheel" width="260" height="260"></canvas>
    </div>

    <button id="spinBtn" class="btn-primary" onclick="spin()">Spin the Coin</button>

    <div id="status" class="status"></div>
    <div id="resultBox" class="infoBox" style="display:none"></div>

    <button id="seminarBtn" class="btn-seminar" onclick="openModal()">Submit / Edit Seminar Topic</button>
    <button id="logoutBtn" class="btn-logout" onclick="logout()">Logout</button>
  </div>
</div>

<div class="footer">
  <div>Developed by Rajesh Akula</div>
  <div>¬© 2026 ¬∑ IIEST Shibpur</div>
</div>

<!-- SEMINAR MODAL -->
<div class="modal" id="modal">
  <div class="modal-box">
    <h3>Seminar Topic</h3>
    <textarea id="topicInput"></textarea>

    <div class="instruction">
      The topic should be technical and related to any trending research topic in mechanical engineering.
    </div>

    <div id="topicStatus" class="status"></div>

    <div class="modal-actions">
      <button id="saveBtn" class="btn-primary" onclick="saveTopic()">Save</button>
      <button id="closeBtn" class="btn-close" disabled onclick="closeModal()">Close</button>
    </div>
  </div>
</div>

<script>
/* üîπ JS LOGIC UNCHANGED ‚Äì YOUR WORKING VERSION üîπ */
</script>

</body>
</html>
